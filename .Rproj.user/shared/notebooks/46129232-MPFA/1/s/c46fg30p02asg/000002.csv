"0","# Change the type of data into suitable data type"
"0","Return = function(x) {"
"0","  ifelse(x == ""n.a."", # If the return is ""n.a."","
"0","         NA, # save as NA,"
"0","         as.numeric(x)) # otherwise, return numeric"
"0","}"
"0",""
"0","MPFA = MPFA %>% mutate( # For the return part"
"0","  `Launch Date` = `Launch Date` %>% as.Date(format = ""%d-%m-%Y""),"
"0","  `Fund size (HKD' m)` = gsub("","", """", `Fund size (HKD' m)`) %>% as.numeric(na.rm = T),"
"0","  `Risk Class` = Return(`Risk Class`),"
"0","  `Latest FER (%)` = Return(`Latest FER (%)`),"
"0","  `Annualized Return 1 Year (% p.a.)` = Return(`Annualized Return 1 Year (% p.a.)`),"
"0","  `Annualized Return 5 Year (% p.a.)` = Return(`Annualized Return 5 Year (% p.a.)`),"
"0","  `Annualized Return 10 Year (% p.a.)` = Return(`Annualized Return 10 Year (% p.a.)`),"
"0","  `Annualized Return Since Launch (% p.a.)` = Return(`Annualized Return Since Launch (% p.a.)`)"
"0",") %>% suppressWarnings() # Suppress warnings because of NA"
"0",""
"0","fee = function(x) { # Transform fee from string to number"
"0","  x = str_split(x, "" "")"
"0","  sapply(x, FUN = function(i){# There are 3 cases of fee"
"0","    if(length(i) == 1) # Case 1: the fee is exact number"
"0","      return(i)"
"0","    if(i[2] == ""to"") # Case 2: up to a number"
"0","      return(i[3]) # take the maximum for ease"
"0","    else # Case 3: between 2 values"
"0","      return(mean(as.numeric(i)[c(1, 3)]) %>% suppressWarnings()) # take the mean for ease"
"0","  }"
"0","  ) %>% as.numeric()"
"0","}"
"0",""
"0","MPFA = MPFA %>% mutate( #For the fee part"
"0","  `Management Fees \n(% p.a.)` = fee(`Management Fees \n(% p.a.)`),"
"0","  `Administration \nFee/\nTrustee Fee/\nCustodian Fee \n(% p.a.)` = fee(`Administration \nFee/\nTrustee Fee/\nCustodian Fee \n(% p.a.)`),"
"0","  `Sponsor Fee (% p.a.)` = fee(`Sponsor Fee (% p.a.)`),"
"0","  `Investment\nManagement \nFee (% p.a.)` = fee(`Investment\nManagement \nFee (% p.a.)`),"
"0","  `Guarantee Charge \n(% p.a.)` = fee(`Guarantee Charge \n(% p.a.)`)"
"0",")"
"0",""
"0","kable(head(MPFA[, 1:4], 10))"
